# Test Environment Configuration
# This file is used by pytest for integration tests
# These tests run INSIDE Docker containers, so use internal container ports (not host-mapped ports)

# Database Configuration - Points to PostgreSQL via Docker network
# Use migration user for tests since tests need BYPASSRLS to set up test data and verify RLS policies
# Note: Use port 5432 (internal container port), not {{ cookiecutter.postgres_port }} (host-mapped port)
DATABASE_URL=postgresql+asyncpg://{{ cookiecutter.postgres_migration_user }}:{{ cookiecutter.postgres_migration_password }}@postgres:5432/{{ cookiecutter.postgres_db }}
MIGRATION_DATABASE_URL=postgresql+asyncpg://{{ cookiecutter.postgres_migration_user }}:{{ cookiecutter.postgres_migration_password }}@postgres:5432/{{ cookiecutter.postgres_db }}

# Redis Configuration - Points to Redis via Docker network
# Note: Use port 6379 (internal container port), not {{ cookiecutter.redis_port }} (host-mapped port)
REDIS_URL=redis://default:{{ cookiecutter.redis_password }}@redis:6379/0

# OAuth Configuration (uses keycloak service name for Docker network)
# Note: Use port 8080 (internal container port), not {{ cookiecutter.keycloak_port }} (host-mapped port)
OAUTH_ISSUER_URL=http://keycloak:8080/realms/{{ cookiecutter.keycloak_realm_name }}
OAUTH_AUDIENCE={{ cookiecutter.keycloak_backend_client_id }}
OAUTH_ALGORITHMS=["RS256"]

# Disable rate limiting for tests
RATE_LIMIT_ENABLED=false

# Debug mode
DEBUG=true
