# {{ cookiecutter.project_name }} - Environment Variables Template
# Copy this file to .env and update the values as needed

# =============================================================================
# General
# =============================================================================
ENV=development
DEBUG=true
LOG_LEVEL=info
NODE_ENV=development

# =============================================================================
# Database (PostgreSQL {{ cookiecutter.postgres_version }})
# =============================================================================
POSTGRES_HOST=postgres
POSTGRES_PORT={{ cookiecutter.postgres_port }}
POSTGRES_DB={{ cookiecutter.postgres_db }}
POSTGRES_USER={{ cookiecutter.postgres_user }}
POSTGRES_PASSWORD={{ cookiecutter.postgres_password }}

# =============================================================================
# Redis Cache
# =============================================================================
REDIS_HOST=redis
REDIS_PORT={{ cookiecutter.redis_port }}
REDIS_PASSWORD={{ cookiecutter.redis_password }}

# =============================================================================
# Backend API
# =============================================================================
BACKEND_PORT={{ cookiecutter.backend_port }}
API_V1_PREFIX={{ cookiecutter.backend_api_prefix }}
# CORS_ORIGINS is configured in backend/app/core/config.py with good defaults
# Uncomment and customize if you need different origins:
# CORS_ORIGINS=http://localhost:{{ cookiecutter.frontend_port }},http://localhost:3001

# Database URL (constructed from POSTGRES_* variables)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Redis URL (constructed from REDIS_* variables)
REDIS_URL=redis://default:${REDIS_PASSWORD}@redis:6379/0

# =============================================================================
# Frontend
# =============================================================================
FRONTEND_PORT={{ cookiecutter.frontend_port }}

# Backend API URL (accessible from browser - use host machine URL)
VITE_API_URL=http://localhost:{{ cookiecutter.backend_port }}

# =============================================================================
# Keycloak OAuth Provider
# =============================================================================
# WARNING: These credentials are for DEVELOPMENT ONLY
# Use strong passwords and proper secret management in production
KEYCLOAK_PORT={{ cookiecutter.keycloak_port }}
KEYCLOAK_ADMIN={{ cookiecutter.keycloak_admin }}
KEYCLOAK_ADMIN_PASSWORD={{ cookiecutter.keycloak_admin_password }}

# =============================================================================
# OpenTelemetry (Observability)
# =============================================================================
# Service name for traces (identifies service in Tempo/Grafana)
OTEL_SERVICE_NAME=backend

# OTLP endpoint for trace export (Tempo gRPC endpoint)
OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317

{%- if cookiecutter.include_sentry == "yes" %}
# =============================================================================
# Sentry Error Tracking (Optional)
# =============================================================================
# Get your DSN from https://sentry.io/settings/{org}/projects/{project}/keys/
# Leave empty to disable Sentry error tracking
SENTRY_DSN={{ cookiecutter.sentry_dsn }}

# Environment tag for Sentry events (development, staging, production)
SENTRY_ENVIRONMENT=development

# Release version (defaults to APP_VERSION if empty)
# Set this in CI/CD to track errors by deployment
# SENTRY_RELEASE=

# Performance monitoring sample rate (0.0 to 1.0)
# 0.1 = 10% of requests are traced for performance
SENTRY_TRACES_SAMPLE_RATE=0.1

# Profiling sample rate (0.0 to 1.0)
# 0.1 = 10% of traces include profiling data
SENTRY_PROFILES_SAMPLE_RATE=0.1
{%- endif %}

# =============================================================================
# Database Backup Configuration
# =============================================================================
# Local backup directory (relative to project root)
BACKUP_DIR=./backups

# Retention policy (number of backups to keep)
# Daily: 7 days, Weekly: 4 weeks, Monthly: 12 months
BACKUP_RETENTION_DAILY=7
BACKUP_RETENTION_WEEKLY=4
BACKUP_RETENTION_MONTHLY=12

# S3 remote storage (optional - for offsite backups)
# Supports AWS S3, MinIO, Backblaze B2, Wasabi, etc.
# BACKUP_S3_BUCKET=
# BACKUP_S3_PREFIX=backups/
# BACKUP_S3_ENDPOINT=  # For S3-compatible services (MinIO, etc.)

# =============================================================================
# Database Restore Configuration
# =============================================================================
# Skip confirmation prompts for automated restores (use with caution!)
# RESTORE_SKIP_CONFIRM=false

# Create a backup before restoring (safety measure)
RESTORE_PRE_BACKUP=true

# =============================================================================
# Docker Compose Service Ports
# =============================================================================
# These ports map container ports to host ports
# Format: HOST_PORT:CONTAINER_PORT
#
# PostgreSQL: {{ cookiecutter.postgres_port }}:5432 (uses {{ cookiecutter.postgres_port }} to avoid conflicts with local PostgreSQL)
# Backend:    {{ cookiecutter.backend_port }}:8000
# Frontend:   {{ cookiecutter.frontend_port }}:5173 (Vite dev server)
# Redis:      {{ cookiecutter.redis_port }}:6379
# Keycloak:   {{ cookiecutter.keycloak_port }}:8080 (OAuth/OIDC provider)
